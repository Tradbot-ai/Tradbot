{"ast":null,"code":"var _jsxFileName = \"/Users/paradox/Desktop/Projects/Tradbot/frontend/src/components/LiveStreamer.js\",\n  _s = $RefreshSig$();\n// components/LiveStreamer.js\nimport { useState, useEffect, useRef } from \"react\";\nimport SymbolSuggestions from \"./SymbolSuggestions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function LiveStreamer() {\n  _s();\n  const [symbol, setSymbol] = useState(\"\");\n  const [price, setPrice] = useState(null);\n  const wsRef = useRef(null);\n  const startStream = () => {\n    if (!symbol) return;\n\n    // Close old WS if exists\n    if (wsRef.current) wsRef.current.close();\n    const ws = new WebSocket(`ws://localhost:8080/api/live?symbol=${symbol}`);\n    wsRef.current = ws;\n    ws.onmessage = msg => {\n      var _data$data;\n      const data = JSON.parse(msg.data);\n      if ((data === null || data === void 0 ? void 0 : (_data$data = data.data) === null || _data$data === void 0 ? void 0 : _data$data.length) > 0) {\n        setPrice(data.data[0].p); // last price\n      }\n    };\n    ws.onerror = () => console.log(\"WS error\");\n    ws.onclose = () => console.log(\"WS closed\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginTop: 40\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u26A1 Live Streaming Price\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Enter symbol (AAPL, BINANCE:BTCUSDT)\",\n      value: symbol,\n      onChange: e => setSymbol(e.target.value),\n      style: {\n        marginRight: 10\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: startStream,\n      children: \"Start Stream\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SymbolSuggestions, {\n      onSelect: setSymbol\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      style: {\n        marginTop: 20\n      },\n      children: [\"Live Price (\", symbol, \"):\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: \"green\"\n        },\n        children: price !== null && price !== void 0 ? price : \"Waiting…\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n}\n_s(LiveStreamer, \"VZnrh/DRRoypDobnKgtH7IGkDIc=\");\n_c = LiveStreamer;\nvar _c;\n$RefreshReg$(_c, \"LiveStreamer\");","map":{"version":3,"names":["useState","useEffect","useRef","SymbolSuggestions","jsxDEV","_jsxDEV","LiveStreamer","_s","symbol","setSymbol","price","setPrice","wsRef","startStream","current","close","ws","WebSocket","onmessage","msg","_data$data","data","JSON","parse","length","p","onerror","console","log","onclose","style","marginTop","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","marginRight","onClick","onSelect","color","_c","$RefreshReg$"],"sources":["/Users/paradox/Desktop/Projects/Tradbot/frontend/src/components/LiveStreamer.js"],"sourcesContent":["// components/LiveStreamer.js\nimport { useState, useEffect, useRef } from \"react\";\nimport SymbolSuggestions from \"./SymbolSuggestions\";\n\nexport default function LiveStreamer() {\n  const [symbol, setSymbol] = useState(\"\");\n  const [price, setPrice] = useState(null);\n  const wsRef = useRef(null);\n\n  const startStream = () => {\n    if (!symbol) return;\n\n    // Close old WS if exists\n    if (wsRef.current) wsRef.current.close();\n\n    const ws = new WebSocket(`ws://localhost:8080/api/live?symbol=${symbol}`);\n    wsRef.current = ws;\n\n    ws.onmessage = (msg) => {\n      const data = JSON.parse(msg.data);\n      if (data?.data?.length > 0) {\n        setPrice(data.data[0].p); // last price\n      }\n    };\n\n    ws.onerror = () => console.log(\"WS error\");\n    ws.onclose = () => console.log(\"WS closed\");\n  };\n\n  return (\n    <div style={{ marginTop: 40 }}>\n      <h2>⚡ Live Streaming Price</h2>\n\n      <input\n        type=\"text\"\n        placeholder=\"Enter symbol (AAPL, BINANCE:BTCUSDT)\"\n        value={symbol}\n        onChange={(e) => setSymbol(e.target.value)}\n        style={{ marginRight: 10 }}\n      />\n\n      <button onClick={startStream}>Start Stream</button>\n\n      <SymbolSuggestions onSelect={setSymbol} />\n\n      <h3 style={{ marginTop: 20 }}>\n        Live Price ({symbol}):{\" \"}\n        <span style={{ color: \"green\" }}>{price ?? \"Waiting…\"}</span>\n      </h3>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"var _jsxFileName = \"/Users/paradox/Desktop/Projects/Tradbot/frontend/src/components/LiveStreamer.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useRef, useState } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst popularCrypto = [\"BINANCE:BTCUSDT\", \"BINANCE:ETHUSDT\", \"BINANCE:BNBUSDT\", \"BINANCE:SOLUSDT\", \"BINANCE:XRPUSDT\", \"BINANCE:DOGEUSDT\", \"BINANCE:ADAUSDT\"];\nexport default function LiveStream() {\n  _s();\n  const [symbol, setSymbol] = useState(\"\");\n  const [price, setPrice] = useState(null);\n  const [isStreaming, setIsStreaming] = useState(false);\n  const wsRef = useRef(null);\n\n  // Start WebSocket connection\n  const startStream = () => {\n    if (!symbol) {\n      alert(\"Please enter a symbol\");\n      return;\n    }\n    if (wsRef.current) {\n      wsRef.current.close();\n    }\n    const ws = new WebSocket(`ws://localhost:8080/api/live?symbol=${symbol}`);\n    wsRef.current = ws;\n    setIsStreaming(true);\n    setPrice(\"Connecting‚Ä¶\");\n    ws.onopen = () => {\n      console.log(\"üîå Connected to backend live stream\");\n    };\n    ws.onmessage = msg => {\n      try {\n        var _data$data;\n        const data = JSON.parse(msg.data);\n        if (data.type === \"trade\" && ((_data$data = data.data) === null || _data$data === void 0 ? void 0 : _data$data.length) > 0) {\n          setPrice(data.data[0].p);\n        }\n      } catch {}\n    };\n    ws.onclose = () => {\n      console.log(\"‚ùå Stream closed\");\n      setIsStreaming(false);\n    };\n  };\n\n  // Stop WebSocket connection\n  const stopStream = () => {\n    if (wsRef.current) {\n      wsRef.current.close();\n      wsRef.current = null;\n      setIsStreaming(false);\n      setPrice(null);\n    }\n  };\n  useEffect(() => {\n    return () => {\n      // cleanup on component unmount\n      if (wsRef.current) wsRef.current.close();\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      marginTop: 40,\n      padding: 20,\n      border: \"1px solid #999\",\n      borderRadius: 8\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uD83D\\uDCE1 Live Price Stream (Finnhub)\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Quick Suggestions:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), popularCrypto.map(c => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSymbol(c),\n        style: {\n          marginRight: 8,\n          marginBottom: 8\n        },\n        children: c\n      }, c, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      placeholder: \"Enter symbol (e.g., AAPL, BINANCE:BTCUSDT)\",\n      value: symbol,\n      onChange: e => setSymbol(e.target.value),\n      style: {\n        padding: 8,\n        marginRight: 10,\n        width: \"60%\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this), !isStreaming ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: startStream,\n      style: {\n        padding: \"8px 16px\"\n      },\n      children: \"\\u25B6\\uFE0F Start Streaming\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: stopStream,\n      style: {\n        padding: \"8px 16px\",\n        background: \"red\",\n        color: \"white\"\n      },\n      children: \"\\u23F9 Stop Streaming\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: 20,\n        fontSize: 22\n      },\n      children: price !== null && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [\"Live Price for \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: symbol\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 28\n        }, this), \": \", price === \"Connecting‚Ä¶\" ? \"Connecting‚Ä¶\" : `$${price}`]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s(LiveStream, \"LGjD7TrgPcvH9Q1N/NchhZK/V+g=\");\n_c = LiveStream;\nvar _c;\n$RefreshReg$(_c, \"LiveStream\");","map":{"version":3,"names":["useEffect","useRef","useState","jsxDEV","_jsxDEV","Fragment","_Fragment","popularCrypto","LiveStream","_s","symbol","setSymbol","price","setPrice","isStreaming","setIsStreaming","wsRef","startStream","alert","current","close","ws","WebSocket","onopen","console","log","onmessage","msg","_data$data","data","JSON","parse","type","length","p","onclose","stopStream","style","marginTop","padding","border","borderRadius","children","fileName","_jsxFileName","lineNumber","columnNumber","marginBottom","map","c","onClick","marginRight","placeholder","value","onChange","e","target","width","background","color","fontSize","_c","$RefreshReg$"],"sources":["/Users/paradox/Desktop/Projects/Tradbot/frontend/src/components/LiveStreamer.js"],"sourcesContent":["import { useEffect, useRef, useState } from \"react\";\n\nconst popularCrypto = [\n  \"BINANCE:BTCUSDT\",\n  \"BINANCE:ETHUSDT\",\n  \"BINANCE:BNBUSDT\",\n  \"BINANCE:SOLUSDT\",\n  \"BINANCE:XRPUSDT\",\n  \"BINANCE:DOGEUSDT\",\n  \"BINANCE:ADAUSDT\",\n];\n\nexport default function LiveStream() {\n  const [symbol, setSymbol] = useState(\"\");\n  const [price, setPrice] = useState(null);\n  const [isStreaming, setIsStreaming] = useState(false);\n  const wsRef = useRef(null);\n\n  // Start WebSocket connection\n  const startStream = () => {\n    if (!symbol) {\n      alert(\"Please enter a symbol\");\n      return;\n    }\n\n    if (wsRef.current) {\n      wsRef.current.close();\n    }\n\n    const ws = new WebSocket(`ws://localhost:8080/api/live?symbol=${symbol}`);\n    wsRef.current = ws;\n\n    setIsStreaming(true);\n    setPrice(\"Connecting‚Ä¶\");\n\n    ws.onopen = () => {\n      console.log(\"üîå Connected to backend live stream\");\n    };\n\n    ws.onmessage = (msg) => {\n      try {\n        const data = JSON.parse(msg.data);\n        if (data.type === \"trade\" && data.data?.length > 0) {\n          setPrice(data.data[0].p);\n        }\n      } catch {}\n    };\n\n    ws.onclose = () => {\n      console.log(\"‚ùå Stream closed\");\n      setIsStreaming(false);\n    };\n  };\n\n  // Stop WebSocket connection\n  const stopStream = () => {\n    if (wsRef.current) {\n      wsRef.current.close();\n      wsRef.current = null;\n      setIsStreaming(false);\n      setPrice(null);\n    }\n  };\n\n  useEffect(() => {\n    return () => {\n      // cleanup on component unmount\n      if (wsRef.current) wsRef.current.close();\n    };\n  }, []);\n\n  return (\n    <div style={{ marginTop: 40, padding: 20, border: \"1px solid #999\", borderRadius: 8 }}>\n      <h2>üì° Live Price Stream (Finnhub)</h2>\n\n      {/* Suggestion Buttons */}\n      <div style={{ marginBottom: 10 }}>\n        <p>Quick Suggestions:</p>\n        {popularCrypto.map((c) => (\n          <button\n            key={c}\n            onClick={() => setSymbol(c)}\n            style={{ marginRight: 8, marginBottom: 8 }}\n          >\n            {c}\n          </button>\n        ))}\n      </div>\n\n      {/* Symbol Input */}\n      <input\n        type=\"text\"\n        placeholder=\"Enter symbol (e.g., AAPL, BINANCE:BTCUSDT)\"\n        value={symbol}\n        onChange={(e) => setSymbol(e.target.value)}\n        style={{ padding: 8, marginRight: 10, width: \"60%\" }}\n      />\n\n      {/* Start / Stop Buttons */}\n      {!isStreaming ? (\n        <button onClick={startStream} style={{ padding: \"8px 16px\" }}>\n          ‚ñ∂Ô∏è Start Streaming\n        </button>\n      ) : (\n        <button onClick={stopStream} style={{ padding: \"8px 16px\", background: \"red\", color: \"white\" }}>\n          ‚èπ Stop Streaming\n        </button>\n      )}\n\n      {/* Live Price */}\n      <div style={{ marginTop: 20, fontSize: 22 }}>\n        {price !== null && (\n          <>\n            Live Price for <b>{symbol}</b>: {price === \"Connecting‚Ä¶\" ? \"Connecting‚Ä¶\" : `$${price}`}\n          </>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}